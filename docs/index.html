<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AI Cooking Assistant - Live Demo</title>
    <meta name="description" content="AI-powered cooking assistant with recipes, ingredient substitutions, and cooking tips. Supports 7 languages.">
    <link rel="icon" type="image/svg+xml" href="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'%3E%3Ctext y='.9em' font-size='90'%3EğŸ³%3C/text%3E%3C/svg%3E">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    <style>
        :root {
            --primary: #f97316;
            --primary-dark: #ea580c;
            --accent: #22c55e;
            --bg-dark: #0a0a0f;
            --bg-card: #16161f;
            --bg-secondary: #1a1a25;
            --text-primary: #ffffff;
            --text-secondary: #a0a0b0;
            --border: rgba(255,255,255,0.1);
            --warning: #f59e0b;
            --info: #3b82f6;
        }

        * { margin: 0; padding: 0; box-sizing: border-box; }

        body {
            font-family: 'Inter', -apple-system, sans-serif;
            background: var(--bg-dark);
            color: var(--text-primary);
            min-height: 100vh;
            line-height: 1.6;
        }

        .bg-animation {
            position: fixed;
            top: 0; left: 0; width: 100%; height: 100%;
            pointer-events: none;
            z-index: 0;
            background: radial-gradient(circle at 30% 20%, rgba(249, 115, 22, 0.1) 0%, transparent 50%),
                        radial-gradient(circle at 70% 80%, rgba(234, 88, 12, 0.08) 0%, transparent 50%);
        }

        .container { max-width: 1000px; margin: 0 auto; padding: 20px; position: relative; z-index: 1; }

        /* Header */
        header {
            text-align: center;
            padding: 40px 20px;
            background: linear-gradient(135deg, var(--primary) 0%, var(--primary-dark) 100%);
            border-radius: 20px;
            margin-bottom: 30px;
            position: relative;
            overflow: hidden;
        }

        header::before {
            content: '';
            position: absolute;
            top: 0; left: 0; right: 0; bottom: 0;
            background: url("data:image/svg+xml,%3Csvg width='60' height='60' viewBox='0 0 60 60' xmlns='http://www.w3.org/2000/svg'%3E%3Cg fill='none' fill-rule='evenodd'%3E%3Cg fill='%23ffffff' fill-opacity='0.05'%3E%3Cpath d='M36 34v-4h-2v4h-4v2h4v4h2v-4h4v-2h-4zm0-30V0h-2v4h-4v2h4v4h2V6h4V4h-4zM6 34v-4H4v4H0v2h4v4h2v-4h4v-2H6zM6 4V0H4v4H0v2h4v4h2V6h4V4H6z'/%3E%3C/g%3E%3C/g%3E%3C/svg%3E");
        }

        header > * { position: relative; z-index: 1; }

        .lang-selector {
            display: flex;
            justify-content: center;
            gap: 8px;
            margin-bottom: 20px;
            flex-wrap: wrap;
        }

        .lang-btn {
            padding: 8px 16px;
            background: rgba(255,255,255,0.15);
            border: 2px solid transparent;
            border-radius: 25px;
            color: white;
            cursor: pointer;
            font-weight: 600;
            font-size: 0.85rem;
            transition: all 0.3s;
        }

        .lang-btn:hover { background: rgba(255,255,255,0.25); transform: translateY(-2px); }
        .lang-btn.active { background: white; color: var(--primary); }

        header h1 {
            font-size: 2.5rem;
            margin-bottom: 10px;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 15px;
        }

        header h1 .icon { font-size: 3rem; }
        header p { opacity: 0.9; font-size: 1.1rem; }

        /* Connection Status */
        .connection-bar {
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 15px;
            background: var(--bg-card);
            padding: 15px 20px;
            border-radius: 15px;
            margin-bottom: 20px;
            flex-wrap: wrap;
            border: 1px solid var(--border);
        }

        .status-indicator {
            display: flex;
            align-items: center;
            gap: 8px;
            font-size: 0.9rem;
        }

        .status-dot {
            width: 10px;
            height: 10px;
            border-radius: 50%;
            animation: pulse 2s infinite;
        }

        .status-dot.connected { background: var(--accent); }
        .status-dot.disconnected { background: var(--warning); }

        @keyframes pulse {
            0%, 100% { opacity: 1; }
            50% { opacity: 0.5; }
        }

        .api-input-group {
            display: flex;
            gap: 10px;
            flex: 1;
            min-width: 300px;
        }

        .api-input {
            flex: 1;
            padding: 10px 15px;
            background: var(--bg-dark);
            border: 1px solid var(--border);
            border-radius: 10px;
            color: var(--text-primary);
            font-size: 0.9rem;
        }

        .api-input:focus { outline: none; border-color: var(--primary); }

        .connect-btn {
            padding: 10px 20px;
            background: var(--primary);
            border: none;
            border-radius: 10px;
            color: white;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s;
        }

        .connect-btn:hover { background: var(--primary-dark); }
        .connect-btn:disabled { opacity: 0.5; cursor: not-allowed; }

        /* Chat Container */
        .chat-container {
            background: var(--bg-card);
            border-radius: 20px;
            overflow: hidden;
            box-shadow: 0 20px 60px rgba(0,0,0,0.3);
            border: 1px solid var(--border);
        }

        .chat-header {
            background: linear-gradient(135deg, var(--primary) 0%, var(--primary-dark) 100%);
            padding: 20px;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .chat-header h2 {
            font-size: 1.2rem;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .mode-badge {
            padding: 5px 12px;
            background: rgba(255,255,255,0.2);
            border-radius: 20px;
            font-size: 0.8rem;
        }

        .chat-messages {
            height: 450px;
            overflow-y: auto;
            padding: 20px;
            background: var(--bg-dark);
        }

        .chat-messages::-webkit-scrollbar { width: 6px; }
        .chat-messages::-webkit-scrollbar-thumb { background: var(--border); border-radius: 3px; }

        .message {
            margin-bottom: 15px;
            animation: slideIn 0.3s ease;
        }

        @keyframes slideIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .message.user { text-align: right; }

        .message-content {
            display: inline-block;
            padding: 12px 18px;
            border-radius: 18px;
            max-width: 85%;
            text-align: left;
        }

        .message.user .message-content {
            background: linear-gradient(135deg, var(--primary) 0%, var(--primary-dark) 100%);
            border-bottom-right-radius: 4px;
        }

        .message.bot .message-content {
            background: var(--bg-card);
            border: 1px solid var(--border);
            border-bottom-left-radius: 4px;
        }

        .message.bot .message-content h3 {
            color: var(--primary);
            margin: 10px 0 8px;
            font-size: 1rem;
        }

        .message.bot .message-content ul { margin: 8px 0 8px 20px; }
        .message.bot .message-content li { margin: 4px 0; }
        .message.bot .message-content p { margin: 8px 0; }

        .info-box {
            margin-top: 10px;
            padding: 10px 12px;
            border-radius: 8px;
            font-size: 0.85rem;
        }

        .info-box.tip { background: rgba(34, 197, 94, 0.15); border-left: 3px solid var(--accent); }
        .info-box.warning { background: rgba(245, 158, 11, 0.15); border-left: 3px solid var(--warning); }
        .info-box.info { background: rgba(59, 130, 246, 0.15); border-left: 3px solid var(--info); }

        .recipe-card {
            background: var(--bg-secondary);
            border-radius: 12px;
            padding: 15px;
            margin: 10px 0;
            border: 1px solid var(--border);
        }

        .recipe-card h4 { color: var(--primary); margin-bottom: 8px; }
        .recipe-meta { display: flex; gap: 15px; flex-wrap: wrap; font-size: 0.85rem; color: var(--text-secondary); margin-bottom: 10px; }
        .recipe-meta span { display: flex; align-items: center; gap: 5px; }

        .typing-indicator {
            display: flex;
            gap: 5px;
            padding: 15px;
        }

        .typing-indicator span {
            width: 8px;
            height: 8px;
            background: var(--primary);
            border-radius: 50%;
            animation: bounce 1.4s infinite ease-in-out;
        }

        .typing-indicator span:nth-child(1) { animation-delay: 0s; }
        .typing-indicator span:nth-child(2) { animation-delay: 0.2s; }
        .typing-indicator span:nth-child(3) { animation-delay: 0.4s; }

        @keyframes bounce {
            0%, 80%, 100% { transform: translateY(0); }
            40% { transform: translateY(-10px); }
        }

        /* Chat Input */
        .chat-input-container {
            padding: 20px;
            background: var(--bg-card);
            border-top: 1px solid var(--border);
        }

        .quick-actions {
            display: flex;
            flex-wrap: wrap;
            gap: 8px;
            margin-bottom: 15px;
        }

        .quick-btn {
            padding: 8px 14px;
            background: var(--bg-dark);
            border: 1px solid var(--border);
            border-radius: 20px;
            color: var(--text-secondary);
            cursor: pointer;
            font-size: 0.85rem;
            transition: all 0.2s;
        }

        .quick-btn:hover {
            background: var(--bg-secondary);
            color: var(--text-primary);
            transform: translateY(-2px);
        }

        .quick-btn.recipe { border-left: 3px solid var(--primary); }
        .quick-btn.technique { border-left: 3px solid var(--accent); }
        .quick-btn.substitute { border-left: 3px solid var(--info); }
        .quick-btn.convert { border-left: 3px solid var(--warning); }

        .input-wrapper {
            display: flex;
            gap: 10px;
        }

        #messageInput {
            flex: 1;
            padding: 15px 20px;
            background: var(--bg-dark);
            border: 2px solid var(--border);
            border-radius: 25px;
            color: var(--text-primary);
            font-size: 1rem;
        }

        #messageInput:focus { outline: none; border-color: var(--primary); }
        #messageInput::placeholder { color: var(--text-secondary); }

        #sendBtn {
            padding: 15px 30px;
            background: linear-gradient(135deg, var(--primary) 0%, var(--primary-dark) 100%);
            border: none;
            border-radius: 25px;
            color: white;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s;
        }

        #sendBtn:hover { transform: translateY(-2px); box-shadow: 0 5px 20px rgba(249, 115, 22, 0.4); }

        /* Features */
        .features {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(220px, 1fr));
            gap: 20px;
            margin-top: 30px;
        }

        .feature-card {
            background: var(--bg-card);
            border-radius: 15px;
            padding: 25px;
            text-align: center;
            transition: all 0.3s;
            border: 1px solid var(--border);
        }

        .feature-card:hover { transform: translateY(-5px); border-color: var(--primary); }

        .feature-icon { font-size: 2.5rem; margin-bottom: 15px; }
        .feature-card h3 { color: var(--text-primary); margin-bottom: 10px; font-size: 1.1rem; }
        .feature-card p { color: var(--text-secondary); font-size: 0.9rem; }

        /* Footer */
        footer {
            text-align: center;
            padding: 30px;
            color: var(--text-secondary);
            font-size: 0.9rem;
        }

        footer a { color: var(--primary); text-decoration: none; }
        footer a:hover { text-decoration: underline; }

        @media (max-width: 768px) {
            header h1 { font-size: 1.8rem; }
            .chat-messages { height: 350px; }
            .api-input-group { min-width: 100%; }
            .connection-bar { flex-direction: column; }
        }
    </style>
</head>
<body>
    <div class="bg-animation"></div>
    <div class="container">
        <header>
            <div class="lang-selector">
                <button class="lang-btn active" data-lang="en" onclick="setLanguage('en')">EN</button>
                <button class="lang-btn" data-lang="ko" onclick="setLanguage('ko')">KO</button>
                <button class="lang-btn" data-lang="ja" onclick="setLanguage('ja')">JA</button>
                <button class="lang-btn" data-lang="zh" onclick="setLanguage('zh')">ZH</button>
                <button class="lang-btn" data-lang="es" onclick="setLanguage('es')">ES</button>
                <button class="lang-btn" data-lang="fr" onclick="setLanguage('fr')">FR</button>
                <button class="lang-btn" data-lang="de" onclick="setLanguage('de')">DE</button>
            </div>
            <h1><span class="icon">ğŸ³</span><span id="title">AI Cooking Assistant</span></h1>
            <p id="subtitle">Your intelligent kitchen companion powered by LangChain</p>
        </header>

        <div class="connection-bar">
            <div class="status-indicator">
                <span class="status-dot disconnected" id="statusDot"></span>
                <span id="statusText">Simulation Mode</span>
            </div>
            <div class="api-input-group">
                <input type="text" class="api-input" id="apiUrl" placeholder="http://localhost:5000">
                <button class="connect-btn" id="connectBtn" onclick="connectToAPI()">Connect</button>
            </div>
        </div>

        <div class="chat-container">
            <div class="chat-header">
                <h2><span>ğŸ‘¨â€ğŸ³</span> <span id="chatTitle">Recipe & Cooking Chat</span></h2>
                <span class="mode-badge" id="modeBadge">Simulation</span>
            </div>
            <div class="chat-messages" id="chatMessages"></div>
            <div class="chat-input-container">
                <div class="quick-actions" id="quickActions"></div>
                <div class="input-wrapper">
                    <input type="text" id="messageInput" onkeypress="handleKeyPress(event)">
                    <button id="sendBtn" onclick="sendMessage()">Send</button>
                </div>
            </div>
        </div>

        <div class="features">
            <div class="feature-card">
                <div class="feature-icon">ğŸ“–</div>
                <h3 id="feature1Title">Recipe Search</h3>
                <p id="feature1Desc">Find recipes by ingredients, cuisine, or dietary preferences.</p>
            </div>
            <div class="feature-card">
                <div class="feature-icon">ğŸ”„</div>
                <h3 id="feature2Title">Substitutions</h3>
                <p id="feature2Desc">Get ingredient substitutions for allergies or preferences.</p>
            </div>
            <div class="feature-card">
                <div class="feature-icon">ğŸ´</div>
                <h3 id="feature3Title">Cooking Tips</h3>
                <p id="feature3Desc">Learn techniques, timing, and professional cooking tips.</p>
            </div>
            <div class="feature-card">
                <div class="feature-icon">âš–ï¸</div>
                <h3 id="feature4Title">Unit Converter</h3>
                <p id="feature4Desc">Convert cooking measurements between different units.</p>
            </div>
        </div>

        <footer>
            <p id="footerText">Built with LangChain & Flask | <a href="https://github.com/yoon-k/langchain-cooking-assistant">View on GitHub</a></p>
            <p id="footerDemo" style="margin-top: 10px; opacity: 0.7;">Connect your backend server to enable live AI responses</p>
        </footer>
    </div>

    <script>
        // State
        let currentLang = localStorage.getItem('cooking-lang') || 'en';
        let isConnected = false;
        let apiBaseUrl = localStorage.getItem('cooking-api') || '';
        let sessionId = 'session_' + Date.now();

        // DOM Elements
        const chatMessages = document.getElementById('chatMessages');
        const messageInput = document.getElementById('messageInput');
        const apiUrlInput = document.getElementById('apiUrl');
        const statusDot = document.getElementById('statusDot');
        const statusText = document.getElementById('statusText');
        const modeBadge = document.getElementById('modeBadge');
        const connectBtn = document.getElementById('connectBtn');

        // i18n translations
        const i18n = {
            en: {
                title: "AI Cooking Assistant",
                subtitle: "Your intelligent kitchen companion powered by LangChain",
                chatTitle: "Recipe & Cooking Chat",
                placeholder: "Ask about recipes, ingredients, cooking tips...",
                send: "Send",
                connect: "Connect",
                disconnect: "Disconnect",
                connecting: "Connecting...",
                connected: "Connected to API",
                disconnected: "Simulation Mode",
                simulation: "Simulation",
                live: "Live API",
                feature1Title: "Recipe Search",
                feature1Desc: "Find recipes by ingredients, cuisine, or dietary preferences.",
                feature2Title: "Substitutions",
                feature2Desc: "Get ingredient substitutions for allergies or preferences.",
                feature3Title: "Cooking Tips",
                feature3Desc: "Learn techniques, timing, and professional cooking tips.",
                feature4Title: "Unit Converter",
                feature4Desc: "Convert cooking measurements between different units.",
                footerText: "Built with LangChain & Flask | <a href='https://github.com/yoon-k/langchain-cooking-assistant'>View on GitHub</a>",
                footerDemo: "Connect your backend server to enable live AI responses",
                quickButtons: [
                    { text: "ğŸ Pasta Recipe", msg: "Show me a pasta recipe", class: "recipe" },
                    { text: "ğŸ¥— Quick Salad", msg: "Give me a quick salad recipe", class: "recipe" },
                    { text: "ğŸ”„ Egg Substitute", msg: "What can I substitute for eggs?", class: "substitute" },
                    { text: "ğŸ³ Cooking Tips", msg: "Give me some cooking tips", class: "technique" },
                    { text: "âš–ï¸ 1 cup to ml", msg: "Convert 1 cup to ml", class: "convert" },
                    { text: "ğŸŒ¿ Vegetarian", msg: "Show me vegetarian recipes", class: "recipe" }
                ]
            },
            ko: {
                title: "AI ìš”ë¦¬ ì–´ì‹œìŠ¤í„´íŠ¸",
                subtitle: "LangChainìœ¼ë¡œ êµ¬ë™ë˜ëŠ” ì§€ëŠ¥í˜• ì£¼ë°© ë„ìš°ë¯¸",
                chatTitle: "ë ˆì‹œí”¼ & ìš”ë¦¬ ì±„íŒ…",
                placeholder: "ë ˆì‹œí”¼, ì¬ë£Œ, ìš”ë¦¬ íŒì— ëŒ€í•´ ì§ˆë¬¸í•˜ì„¸ìš”...",
                send: "ì „ì†¡",
                connect: "ì—°ê²°",
                disconnect: "ì—°ê²° í•´ì œ",
                connecting: "ì—°ê²° ì¤‘...",
                connected: "API ì—°ê²°ë¨",
                disconnected: "ì‹œë®¬ë ˆì´ì…˜ ëª¨ë“œ",
                simulation: "ì‹œë®¬ë ˆì´ì…˜",
                live: "ë¼ì´ë¸Œ API",
                feature1Title: "ë ˆì‹œí”¼ ê²€ìƒ‰",
                feature1Desc: "ì¬ë£Œ, ìš”ë¦¬ ì¢…ë¥˜ ë˜ëŠ” ì‹ì´ ì„ í˜¸ë„ë¡œ ë ˆì‹œí”¼ë¥¼ ì°¾ìœ¼ì„¸ìš”.",
                feature2Title: "ì¬ë£Œ ëŒ€ì²´",
                feature2Desc: "ì•Œë ˆë¥´ê¸°ë‚˜ ì„ í˜¸ë„ì— ë§ëŠ” ì¬ë£Œ ëŒ€ì²´í’ˆì„ ì°¾ìœ¼ì„¸ìš”.",
                feature3Title: "ìš”ë¦¬ íŒ",
                feature3Desc: "ê¸°ìˆ , íƒ€ì´ë°, ì „ë¬¸ ìš”ë¦¬ íŒì„ ë°°ìš°ì„¸ìš”.",
                feature4Title: "ë‹¨ìœ„ ë³€í™˜",
                feature4Desc: "ìš”ë¦¬ ì¸¡ì • ë‹¨ìœ„ë¥¼ ë³€í™˜í•˜ì„¸ìš”.",
                footerText: "LangChain & Flaskë¡œ ì œì‘ | <a href='https://github.com/yoon-k/langchain-cooking-assistant'>GitHubì—ì„œ ë³´ê¸°</a>",
                footerDemo: "ë°±ì—”ë“œ ì„œë²„ë¥¼ ì—°ê²°í•˜ì—¬ ì‹¤ì‹œê°„ AI ì‘ë‹µì„ í™œì„±í™”í•˜ì„¸ìš”",
                quickButtons: [
                    { text: "ğŸ íŒŒìŠ¤íƒ€ ë ˆì‹œí”¼", msg: "íŒŒìŠ¤íƒ€ ë ˆì‹œí”¼ ì•Œë ¤ì£¼ì„¸ìš”", class: "recipe" },
                    { text: "ğŸ¥— ê°„ë‹¨í•œ ìƒëŸ¬ë“œ", msg: "ê°„ë‹¨í•œ ìƒëŸ¬ë“œ ë ˆì‹œí”¼ ì•Œë ¤ì£¼ì„¸ìš”", class: "recipe" },
                    { text: "ğŸ”„ ê³„ë€ ëŒ€ì²´", msg: "ê³„ë€ ëŒ€ì‹  ë­˜ ì“¸ ìˆ˜ ìˆë‚˜ìš”?", class: "substitute" },
                    { text: "ğŸ³ ìš”ë¦¬ íŒ", msg: "ìš”ë¦¬ íŒì„ ì•Œë ¤ì£¼ì„¸ìš”", class: "technique" },
                    { text: "âš–ï¸ 1ì»µ ë³€í™˜", msg: "1ì»µì„ mlë¡œ ë³€í™˜í•´ì£¼ì„¸ìš”", class: "convert" },
                    { text: "ğŸŒ¿ ì±„ì‹ ìš”ë¦¬", msg: "ì±„ì‹ ë ˆì‹œí”¼ë¥¼ ë³´ì—¬ì£¼ì„¸ìš”", class: "recipe" }
                ]
            },
            ja: {
                title: "AIæ–™ç†ã‚¢ã‚·ã‚¹ã‚¿ãƒ³ãƒˆ",
                subtitle: "LangChainã§å‹•ä½œã™ã‚‹ã‚¤ãƒ³ãƒ†ãƒªã‚¸ã‚§ãƒ³ãƒˆãªã‚­ãƒƒãƒãƒ³ã‚³ãƒ³ãƒ‘ãƒ‹ã‚ªãƒ³",
                chatTitle: "ãƒ¬ã‚·ãƒ”ï¼†æ–™ç†ãƒãƒ£ãƒƒãƒˆ",
                placeholder: "ãƒ¬ã‚·ãƒ”ã€ææ–™ã€æ–™ç†ã®ã‚³ãƒ„ã«ã¤ã„ã¦è³ªå•ã—ã¦ãã ã•ã„...",
                send: "é€ä¿¡",
                connect: "æ¥ç¶š",
                disconnect: "åˆ‡æ–­",
                connecting: "æ¥ç¶šä¸­...",
                connected: "APIæ¥ç¶šæ¸ˆã¿",
                disconnected: "ã‚·ãƒŸãƒ¥ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³ãƒ¢ãƒ¼ãƒ‰",
                simulation: "ã‚·ãƒŸãƒ¥ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³",
                live: "ãƒ©ã‚¤ãƒ–API",
                feature1Title: "ãƒ¬ã‚·ãƒ”æ¤œç´¢",
                feature1Desc: "ææ–™ã€æ–™ç†ã®ç¨®é¡ã€é£Ÿäº‹ã®å¥½ã¿ã§ãƒ¬ã‚·ãƒ”ã‚’æ¤œç´¢ã€‚",
                feature2Title: "ä»£æ›¿å“",
                feature2Desc: "ã‚¢ãƒ¬ãƒ«ã‚®ãƒ¼ã‚„å¥½ã¿ã«åˆã‚ã›ãŸææ–™ã®ä»£æ›¿å“ã‚’å–å¾—ã€‚",
                feature3Title: "æ–™ç†ã®ã‚³ãƒ„",
                feature3Desc: "ãƒ†ã‚¯ãƒ‹ãƒƒã‚¯ã€ã‚¿ã‚¤ãƒŸãƒ³ã‚°ã€ãƒ—ãƒ­ã®æ–™ç†ã®ã‚³ãƒ„ã‚’å­¦ã¶ã€‚",
                feature4Title: "å˜ä½å¤‰æ›",
                feature4Desc: "æ–™ç†ã®è¨ˆé‡å˜ä½ã‚’å¤‰æ›ã€‚",
                footerText: "LangChain & Flaskã§æ§‹ç¯‰ | <a href='https://github.com/yoon-k/langchain-cooking-assistant'>GitHubã§è¦‹ã‚‹</a>",
                footerDemo: "ãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰ã‚µãƒ¼ãƒãƒ¼ã‚’æ¥ç¶šã—ã¦ãƒ©ã‚¤ãƒ–AIå¿œç­”ã‚’æœ‰åŠ¹ã«ã—ã¦ãã ã•ã„",
                quickButtons: [
                    { text: "ğŸ ãƒ‘ã‚¹ã‚¿ãƒ¬ã‚·ãƒ”", msg: "ãƒ‘ã‚¹ã‚¿ã®ãƒ¬ã‚·ãƒ”ã‚’æ•™ãˆã¦", class: "recipe" },
                    { text: "ğŸ¥— ç°¡å˜ã‚µãƒ©ãƒ€", msg: "ç°¡å˜ãªã‚µãƒ©ãƒ€ã®ãƒ¬ã‚·ãƒ”ã‚’æ•™ãˆã¦", class: "recipe" },
                    { text: "ğŸ”„ åµã®ä»£æ›¿", msg: "åµã®ä»£ã‚ã‚Šã«ä½•ãŒä½¿ãˆã¾ã™ã‹ï¼Ÿ", class: "substitute" },
                    { text: "ğŸ³ æ–™ç†ã®ã‚³ãƒ„", msg: "æ–™ç†ã®ã‚³ãƒ„ã‚’æ•™ãˆã¦ãã ã•ã„", class: "technique" },
                    { text: "âš–ï¸ 1ã‚«ãƒƒãƒ—ã‚’ml", msg: "1ã‚«ãƒƒãƒ—ã‚’mlã«å¤‰æ›ã—ã¦", class: "convert" },
                    { text: "ğŸŒ¿ ãƒ™ã‚¸ã‚¿ãƒªã‚¢ãƒ³", msg: "ãƒ™ã‚¸ã‚¿ãƒªã‚¢ãƒ³ãƒ¬ã‚·ãƒ”ã‚’è¦‹ã›ã¦", class: "recipe" }
                ]
            },
            zh: {
                title: "AIçƒ¹é¥ªåŠ©æ‰‹",
                subtitle: "ç”±LangChainé©±åŠ¨çš„æ™ºèƒ½å¨æˆ¿ä¼´ä¾£",
                chatTitle: "é£Ÿè°±ä¸çƒ¹é¥ªèŠå¤©",
                placeholder: "è¯¢é—®é£Ÿè°±ã€é£Ÿæã€çƒ¹é¥ªæŠ€å·§...",
                send: "å‘é€",
                connect: "è¿æ¥",
                disconnect: "æ–­å¼€",
                connecting: "è¿æ¥ä¸­...",
                connected: "å·²è¿æ¥API",
                disconnected: "æ¨¡æ‹Ÿæ¨¡å¼",
                simulation: "æ¨¡æ‹Ÿ",
                live: "å®æ—¶API",
                feature1Title: "é£Ÿè°±æœç´¢",
                feature1Desc: "æŒ‰é£Ÿæã€èœç³»æˆ–é¥®é£Ÿåå¥½æœç´¢é£Ÿè°±ã€‚",
                feature2Title: "é£Ÿææ›¿ä»£",
                feature2Desc: "è·å–é€‚åˆè¿‡æ•æˆ–åå¥½çš„é£Ÿææ›¿ä»£å“ã€‚",
                feature3Title: "çƒ¹é¥ªæŠ€å·§",
                feature3Desc: "å­¦ä¹ æŠ€æœ¯ã€æ—¶é—´æ§åˆ¶å’Œä¸“ä¸šçƒ¹é¥ªæŠ€å·§ã€‚",
                feature4Title: "å•ä½è½¬æ¢",
                feature4Desc: "è½¬æ¢çƒ¹é¥ªæµ‹é‡å•ä½ã€‚",
                footerText: "ä½¿ç”¨LangChainå’ŒFlaskæ„å»º | <a href='https://github.com/yoon-k/langchain-cooking-assistant'>åœ¨GitHubä¸ŠæŸ¥çœ‹</a>",
                footerDemo: "è¿æ¥æ‚¨çš„åç«¯æœåŠ¡å™¨ä»¥å¯ç”¨å®æ—¶AIå“åº”",
                quickButtons: [
                    { text: "ğŸ æ„é¢é£Ÿè°±", msg: "ç»™æˆ‘ä¸€ä¸ªæ„é¢é£Ÿè°±", class: "recipe" },
                    { text: "ğŸ¥— å¿«é€Ÿæ²™æ‹‰", msg: "ç»™æˆ‘ä¸€ä¸ªå¿«é€Ÿæ²™æ‹‰é£Ÿè°±", class: "recipe" },
                    { text: "ğŸ”„ é¸¡è›‹æ›¿ä»£", msg: "é¸¡è›‹å¯ä»¥ç”¨ä»€ä¹ˆä»£æ›¿ï¼Ÿ", class: "substitute" },
                    { text: "ğŸ³ çƒ¹é¥ªæŠ€å·§", msg: "ç»™æˆ‘ä¸€äº›çƒ¹é¥ªæŠ€å·§", class: "technique" },
                    { text: "âš–ï¸ 1æ¯è½¬æ¯«å‡", msg: "1æ¯è½¬æ¢æˆæ¯«å‡", class: "convert" },
                    { text: "ğŸŒ¿ ç´ é£Ÿ", msg: "ç»™æˆ‘çœ‹ç´ é£Ÿé£Ÿè°±", class: "recipe" }
                ]
            },
            es: {
                title: "Asistente de Cocina IA",
                subtitle: "Tu compaÃ±ero inteligente de cocina impulsado por LangChain",
                chatTitle: "Chat de Recetas y Cocina",
                placeholder: "Pregunta sobre recetas, ingredientes, consejos de cocina...",
                send: "Enviar",
                connect: "Conectar",
                disconnect: "Desconectar",
                connecting: "Conectando...",
                connected: "API Conectada",
                disconnected: "Modo SimulaciÃ³n",
                simulation: "SimulaciÃ³n",
                live: "API en Vivo",
                feature1Title: "BÃºsqueda de Recetas",
                feature1Desc: "Encuentra recetas por ingredientes, cocina o preferencias dietÃ©ticas.",
                feature2Title: "Sustituciones",
                feature2Desc: "ObtÃ©n sustitutos de ingredientes para alergias o preferencias.",
                feature3Title: "Consejos de Cocina",
                feature3Desc: "Aprende tÃ©cnicas, tiempos y consejos profesionales de cocina.",
                feature4Title: "Convertidor de Unidades",
                feature4Desc: "Convierte medidas de cocina entre diferentes unidades.",
                footerText: "Construido con LangChain y Flask | <a href='https://github.com/yoon-k/langchain-cooking-assistant'>Ver en GitHub</a>",
                footerDemo: "Conecta tu servidor backend para habilitar respuestas de IA en vivo",
                quickButtons: [
                    { text: "ğŸ Receta de Pasta", msg: "MuÃ©strame una receta de pasta", class: "recipe" },
                    { text: "ğŸ¥— Ensalada RÃ¡pida", msg: "Dame una receta de ensalada rÃ¡pida", class: "recipe" },
                    { text: "ğŸ”„ Sustituto de Huevo", msg: "Â¿QuÃ© puedo usar en lugar de huevos?", class: "substitute" },
                    { text: "ğŸ³ Consejos de Cocina", msg: "Dame algunos consejos de cocina", class: "technique" },
                    { text: "âš–ï¸ 1 taza a ml", msg: "Convierte 1 taza a ml", class: "convert" },
                    { text: "ğŸŒ¿ Vegetariano", msg: "MuÃ©strame recetas vegetarianas", class: "recipe" }
                ]
            },
            fr: {
                title: "Assistant Cuisine IA",
                subtitle: "Votre compagnon de cuisine intelligent propulsÃ© par LangChain",
                chatTitle: "Chat Recettes et Cuisine",
                placeholder: "Posez des questions sur les recettes, ingrÃ©dients, conseils de cuisine...",
                send: "Envoyer",
                connect: "Connecter",
                disconnect: "DÃ©connecter",
                connecting: "Connexion...",
                connected: "API ConnectÃ©e",
                disconnected: "Mode Simulation",
                simulation: "Simulation",
                live: "API en Direct",
                feature1Title: "Recherche de Recettes",
                feature1Desc: "Trouvez des recettes par ingrÃ©dients, cuisine ou prÃ©fÃ©rences alimentaires.",
                feature2Title: "Substitutions",
                feature2Desc: "Obtenez des substituts d'ingrÃ©dients pour allergies ou prÃ©fÃ©rences.",
                feature3Title: "Conseils de Cuisine",
                feature3Desc: "Apprenez techniques, timing et conseils de cuisine professionnels.",
                feature4Title: "Convertisseur d'UnitÃ©s",
                feature4Desc: "Convertissez les mesures de cuisine entre diffÃ©rentes unitÃ©s.",
                footerText: "Construit avec LangChain et Flask | <a href='https://github.com/yoon-k/langchain-cooking-assistant'>Voir sur GitHub</a>",
                footerDemo: "Connectez votre serveur backend pour activer les rÃ©ponses IA en direct",
                quickButtons: [
                    { text: "ğŸ Recette de PÃ¢tes", msg: "Montre-moi une recette de pÃ¢tes", class: "recipe" },
                    { text: "ğŸ¥— Salade Rapide", msg: "Donne-moi une recette de salade rapide", class: "recipe" },
                    { text: "ğŸ”„ Substitut d'Å’uf", msg: "Que puis-je utiliser Ã  la place des Å“ufs?", class: "substitute" },
                    { text: "ğŸ³ Conseils Cuisine", msg: "Donne-moi des conseils de cuisine", class: "technique" },
                    { text: "âš–ï¸ 1 tasse en ml", msg: "Convertis 1 tasse en ml", class: "convert" },
                    { text: "ğŸŒ¿ VÃ©gÃ©tarien", msg: "Montre-moi des recettes vÃ©gÃ©tariennes", class: "recipe" }
                ]
            },
            de: {
                title: "KI Kochassistent",
                subtitle: "Ihr intelligenter KÃ¼chenbegleiter powered by LangChain",
                chatTitle: "Rezept & Koch-Chat",
                placeholder: "Fragen Sie nach Rezepten, Zutaten, Kochtipps...",
                send: "Senden",
                connect: "Verbinden",
                disconnect: "Trennen",
                connecting: "Verbinde...",
                connected: "API verbunden",
                disconnected: "Simulationsmodus",
                simulation: "Simulation",
                live: "Live API",
                feature1Title: "Rezeptsuche",
                feature1Desc: "Finden Sie Rezepte nach Zutaten, KÃ¼che oder ErnÃ¤hrungsvorlieben.",
                feature2Title: "Ersatzstoffe",
                feature2Desc: "Erhalten Sie Zutatenersatz fÃ¼r Allergien oder Vorlieben.",
                feature3Title: "Kochtipps",
                feature3Desc: "Lernen Sie Techniken, Timing und professionelle Kochtipps.",
                feature4Title: "Einheitenumrechner",
                feature4Desc: "Rechnen Sie KochmaÃŸe zwischen verschiedenen Einheiten um.",
                footerText: "Erstellt mit LangChain & Flask | <a href='https://github.com/yoon-k/langchain-cooking-assistant'>Auf GitHub ansehen</a>",
                footerDemo: "Verbinden Sie Ihren Backend-Server fÃ¼r Live-KI-Antworten",
                quickButtons: [
                    { text: "ğŸ Pasta Rezept", msg: "Zeig mir ein Pasta-Rezept", class: "recipe" },
                    { text: "ğŸ¥— Schneller Salat", msg: "Gib mir ein schnelles Salatrezept", class: "recipe" },
                    { text: "ğŸ”„ Ei-Ersatz", msg: "Was kann ich anstelle von Eiern verwenden?", class: "substitute" },
                    { text: "ğŸ³ Kochtipps", msg: "Gib mir einige Kochtipps", class: "technique" },
                    { text: "âš–ï¸ 1 Tasse zu ml", msg: "Konvertiere 1 Tasse zu ml", class: "convert" },
                    { text: "ğŸŒ¿ Vegetarisch", msg: "Zeig mir vegetarische Rezepte", class: "recipe" }
                ]
            }
        };

        // Simulated responses
        const simulatedResponses = {
            en: {
                welcome: `<h3>ğŸ‘¨â€ğŸ³ Welcome to AI Cooking Assistant!</h3><p>I can help you with:</p><ul><li>Finding and suggesting recipes</li><li>Ingredient substitutions</li><li>Cooking techniques and tips</li><li>Unit conversions</li><li>Meal planning ideas</li></ul><div class="info-box tip">ğŸ’¡ Try asking: "Show me a pasta recipe" or "What can I substitute for eggs?"</div>`,
                pasta: `<h3>ğŸ Classic Spaghetti Aglio e Olio</h3>
                <div class="recipe-card">
                    <h4>Spaghetti with Garlic and Oil</h4>
                    <div class="recipe-meta">
                        <span>â±ï¸ 20 mins</span>
                        <span>ğŸ‘¥ 2 servings</span>
                        <span>ğŸ“Š Easy</span>
                    </div>
                    <p><strong>Ingredients:</strong></p>
                    <ul>
                        <li>200g spaghetti</li>
                        <li>4 cloves garlic, thinly sliced</li>
                        <li>1/4 cup olive oil</li>
                        <li>1/2 tsp red pepper flakes</li>
                        <li>Fresh parsley, salt to taste</li>
                    </ul>
                    <p><strong>Instructions:</strong></p>
                    <ol>
                        <li>Cook pasta according to package directions</li>
                        <li>SautÃ© garlic in olive oil until golden</li>
                        <li>Add red pepper flakes</li>
                        <li>Toss with pasta, garnish with parsley</li>
                    </ol>
                </div>
                <div class="info-box tip">ğŸ’¡ Save pasta water to adjust sauce consistency!</div>`,
                salad: `<h3>ğŸ¥— Quick Mediterranean Salad</h3>
                <div class="recipe-card">
                    <h4>Fresh & Healthy</h4>
                    <div class="recipe-meta">
                        <span>â±ï¸ 10 mins</span>
                        <span>ğŸ‘¥ 2 servings</span>
                        <span>ğŸŒ¿ Vegetarian</span>
                    </div>
                    <p><strong>Ingredients:</strong></p>
                    <ul>
                        <li>Mixed greens</li>
                        <li>Cherry tomatoes</li>
                        <li>Cucumber, feta cheese</li>
                        <li>Olives, red onion</li>
                        <li>Olive oil & lemon dressing</li>
                    </ul>
                </div>`,
                egg_substitute: `<h3>ğŸ”„ Egg Substitutes</h3><p>Here are common egg substitutes for baking:</p><ul><li><strong>Flax egg:</strong> 1 tbsp ground flax + 3 tbsp water (per egg)</li><li><strong>Chia egg:</strong> 1 tbsp chia seeds + 3 tbsp water</li><li><strong>Applesauce:</strong> 1/4 cup (for moisture)</li><li><strong>Mashed banana:</strong> 1/4 cup (adds sweetness)</li><li><strong>Commercial replacers:</strong> Follow package instructions</li></ul><div class="info-box info">â„¹ï¸ Best substitute depends on the recipe - binding vs. moisture vs. leavening.</div>`,
                tips: `<h3>ğŸ³ Essential Cooking Tips</h3><ul><li><strong>Mise en place:</strong> Prep all ingredients before cooking</li><li><strong>Heat control:</strong> Don't overcrowd the pan</li><li><strong>Season as you go:</strong> Build flavor in layers</li><li><strong>Rest meat:</strong> Let proteins rest after cooking</li><li><strong>Taste often:</strong> Adjust seasoning throughout</li><li><strong>Sharp knives:</strong> Safer and more precise</li></ul><div class="info-box tip">ğŸ’¡ The key to great cooking is patience and practice!</div>`,
                convert: `<h3>âš–ï¸ Unit Conversion</h3><p><strong>1 cup = 236.59 ml</strong></p><p>Common conversions:</p><ul><li>1 tbsp = 15 ml</li><li>1 tsp = 5 ml</li><li>1 oz = 28.35 g</li><li>1 lb = 453.59 g</li></ul><div class="info-box info">â„¹ï¸ For precise baking, use weight measurements when possible.</div>`,
                vegetarian: `<h3>ğŸŒ¿ Vegetarian Recipe Ideas</h3><ul><li>Mushroom Risotto</li><li>Vegetable Stir-Fry</li><li>Caprese Salad</li><li>Eggplant Parmesan</li><li>Lentil Soup</li><li>Veggie Buddha Bowl</li></ul><div class="info-box tip">ğŸ’¡ Ask me for any specific vegetarian recipe!</div>`,
                default: `<h3>ğŸ‘¨â€ğŸ³ Cooking Assistant</h3><p>I can help with recipes, substitutions, cooking tips, and unit conversions.</p><p>Try asking about:</p><ul><li>Specific recipes (pasta, salad, soup, etc.)</li><li>Ingredient substitutions</li><li>Cooking techniques</li><li>Unit conversions</li></ul>`
            },
            ko: {
                welcome: `<h3>ğŸ‘¨â€ğŸ³ AI ìš”ë¦¬ ì–´ì‹œìŠ¤í„´íŠ¸ì— ì˜¤ì‹  ê²ƒì„ í™˜ì˜í•©ë‹ˆë‹¤!</h3><p>ë‹¤ìŒì„ ë„ì™€ë“œë¦´ ìˆ˜ ìˆìŠµë‹ˆë‹¤:</p><ul><li>ë ˆì‹œí”¼ ê²€ìƒ‰ ë° ì¶”ì²œ</li><li>ì¬ë£Œ ëŒ€ì²´í’ˆ</li><li>ìš”ë¦¬ ê¸°ìˆ  ë° íŒ</li><li>ë‹¨ìœ„ ë³€í™˜</li></ul><div class="info-box tip">ğŸ’¡ "íŒŒìŠ¤íƒ€ ë ˆì‹œí”¼ ì•Œë ¤ì£¼ì„¸ìš”" ë˜ëŠ” "ê³„ë€ ëŒ€ì‹  ë­˜ ì“¸ ìˆ˜ ìˆë‚˜ìš”?"ë¼ê³  ë¬¼ì–´ë³´ì„¸ìš”!</div>`,
                default: `<h3>ğŸ‘¨â€ğŸ³ ìš”ë¦¬ ì–´ì‹œìŠ¤í„´íŠ¸</h3><p>ë ˆì‹œí”¼, ì¬ë£Œ ëŒ€ì²´, ìš”ë¦¬ íŒ, ë‹¨ìœ„ ë³€í™˜ì„ ë„ì™€ë“œë¦½ë‹ˆë‹¤.</p>`
            }
        };

        // Functions
        function setLanguage(lang) {
            currentLang = lang;
            localStorage.setItem('cooking-lang', lang);
            const t = i18n[lang];

            document.querySelectorAll('.lang-btn').forEach(btn => {
                btn.classList.toggle('active', btn.dataset.lang === lang);
            });

            document.getElementById('title').textContent = t.title;
            document.getElementById('subtitle').textContent = t.subtitle;
            document.getElementById('chatTitle').textContent = t.chatTitle;
            document.getElementById('messageInput').placeholder = t.placeholder;
            document.getElementById('sendBtn').textContent = t.send;
            connectBtn.textContent = isConnected ? t.disconnect : t.connect;
            statusText.textContent = isConnected ? t.connected : t.disconnected;
            modeBadge.textContent = isConnected ? t.live : t.simulation;

            document.getElementById('feature1Title').textContent = t.feature1Title;
            document.getElementById('feature1Desc').textContent = t.feature1Desc;
            document.getElementById('feature2Title').textContent = t.feature2Title;
            document.getElementById('feature2Desc').textContent = t.feature2Desc;
            document.getElementById('feature3Title').textContent = t.feature3Title;
            document.getElementById('feature3Desc').textContent = t.feature3Desc;
            document.getElementById('feature4Title').textContent = t.feature4Title;
            document.getElementById('feature4Desc').textContent = t.feature4Desc;
            document.getElementById('footerText').innerHTML = t.footerText;
            document.getElementById('footerDemo').textContent = t.footerDemo;

            const quickActionsDiv = document.getElementById('quickActions');
            quickActionsDiv.innerHTML = t.quickButtons.map(btn =>
                `<button class="quick-btn ${btn.class}" onclick="sendQuickMessage('${btn.msg}')">${btn.text}</button>`
            ).join('');

            chatMessages.innerHTML = '';
            const welcomeResponse = simulatedResponses[lang]?.welcome || simulatedResponses.en.welcome;
            addMessage(welcomeResponse, false);
        }

        async function connectToAPI() {
            const url = apiUrlInput.value.trim();

            if (isConnected) {
                isConnected = false;
                apiBaseUrl = '';
                localStorage.removeItem('cooking-api');
                updateConnectionStatus();
                return;
            }

            if (!url) {
                alert('Please enter API URL');
                return;
            }

            connectBtn.disabled = true;
            connectBtn.textContent = i18n[currentLang].connecting;

            try {
                const response = await fetch(`${url}/api/health`, { method: 'GET' });
                if (response.ok) {
                    isConnected = true;
                    apiBaseUrl = url;
                    localStorage.setItem('cooking-api', url);
                    sessionId = 'session_' + Date.now();
                } else {
                    throw new Error('API health check failed');
                }
            } catch (error) {
                alert(`Connection failed: ${error.message}`);
                isConnected = false;
            }

            connectBtn.disabled = false;
            updateConnectionStatus();
        }

        function updateConnectionStatus() {
            const t = i18n[currentLang];
            statusDot.className = 'status-dot ' + (isConnected ? 'connected' : 'disconnected');
            statusText.textContent = isConnected ? t.connected : t.disconnected;
            modeBadge.textContent = isConnected ? t.live : t.simulation;
            connectBtn.textContent = isConnected ? t.disconnect : t.connect;
        }

        function addMessage(content, isUser = false) {
            const messageDiv = document.createElement('div');
            messageDiv.className = `message ${isUser ? 'user' : 'bot'}`;
            const contentDiv = document.createElement('div');
            contentDiv.className = 'message-content';
            if (isUser) {
                contentDiv.textContent = content;
            } else {
                contentDiv.innerHTML = content;
            }
            messageDiv.appendChild(contentDiv);
            chatMessages.appendChild(messageDiv);
            chatMessages.scrollTop = chatMessages.scrollHeight;
        }

        function showTyping() {
            const typingDiv = document.createElement('div');
            typingDiv.className = 'message bot';
            typingDiv.id = 'typing';
            typingDiv.innerHTML = `<div class="message-content"><div class="typing-indicator"><span></span><span></span><span></span></div></div>`;
            chatMessages.appendChild(typingDiv);
            chatMessages.scrollTop = chatMessages.scrollHeight;
        }

        function removeTyping() {
            const typing = document.getElementById('typing');
            if (typing) typing.remove();
        }

        function getSimulatedResponse(message) {
            const lower = message.toLowerCase();
            const responses = simulatedResponses[currentLang] || simulatedResponses.en;

            if (lower.match(/pasta|íŒŒìŠ¤íƒ€|ãƒ‘ã‚¹ã‚¿|æ„é¢|pÃ¢tes/i)) {
                return responses.pasta || simulatedResponses.en.pasta;
            }
            if (lower.match(/salad|ìƒëŸ¬ë“œ|ã‚µãƒ©ãƒ€|æ²™æ‹‰|salade|ensalada/i)) {
                return responses.salad || simulatedResponses.en.salad;
            }
            if (lower.match(/egg|substitut|ê³„ë€|ëŒ€ì²´|åµ|ä»£æ›¿|é¸¡è›‹|Å“uf|huevo|ei/i)) {
                return responses.egg_substitute || simulatedResponses.en.egg_substitute;
            }
            if (lower.match(/tip|advice|íŒ|ã‚³ãƒ„|æŠ€å·§|conseil|consejo|tipp/i)) {
                return responses.tips || simulatedResponses.en.tips;
            }
            if (lower.match(/convert|cup|ml|ë³€í™˜|ì»µ|å¤‰æ›|ã‚«ãƒƒãƒ—|è½¬æ¢|æ¯|convertir|taza|umrechnen|tasse/i)) {
                return responses.convert || simulatedResponses.en.convert;
            }
            if (lower.match(/vegetarian|vegan|ì±„ì‹|ãƒ™ã‚¸ã‚¿ãƒªã‚¢ãƒ³|ç´ é£Ÿ|vÃ©gÃ©tarien|vegetariano|vegetarisch/i)) {
                return responses.vegetarian || simulatedResponses.en.vegetarian;
            }

            return responses.default || simulatedResponses.en.default;
        }

        async function sendMessage() {
            const message = messageInput.value.trim();
            if (!message) return;

            addMessage(message, true);
            messageInput.value = '';
            showTyping();

            if (isConnected && apiBaseUrl) {
                try {
                    const response = await fetch(`${apiBaseUrl}/api/chat`, {
                        method: 'POST',
                        headers: { 'Content-Type': 'application/json' },
                        body: JSON.stringify({ session_id: sessionId, message: message })
                    });

                    removeTyping();

                    if (response.ok) {
                        const data = await response.json();
                        addMessage(data.response, false);
                    } else {
                        throw new Error('API request failed');
                    }
                } catch (error) {
                    removeTyping();
                    addMessage(getSimulatedResponse(message) + `<div class="info-box warning">âš ï¸ API error - showing simulated response</div>`, false);
                }
            } else {
                setTimeout(() => {
                    removeTyping();
                    addMessage(getSimulatedResponse(message), false);
                }, 800 + Math.random() * 500);
            }
        }

        function sendQuickMessage(message) {
            messageInput.value = message;
            sendMessage();
        }

        function handleKeyPress(event) {
            if (event.key === 'Enter') sendMessage();
        }

        // Initialize
        if (apiBaseUrl) {
            apiUrlInput.value = apiBaseUrl;
            connectToAPI();
        }
        setLanguage(currentLang);
    </script>
</body>
</html>
